import{s as U,f as m,a as L,g as f,h as E,A as M,c as N,d as p,j as g,i as S,x as _,y,o as W,B as x,p as T}from"../chunks/scheduler.035644c2.js";import{S as H,i as R,b as G,d as B,m as J,a as X,t as Y,e as Z}from"../chunks/index.80d11f80.js";const Q=500,ee=20,te=300,ne="https://stackblitz.com",A=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],se=["project","search","ports","settings"],oe=["light","dark"],ie=["editor","preview"],C={clickToLoad:e=>h("ctl",e),devToolsHeight:e=>F("devtoolsheight",e),forceEmbedLayout:e=>h("embed",e),hideDevTools:e=>h("hidedevtools",e),hideExplorer:e=>h("hideExplorer",e),hideNavigation:e=>h("hideNavigation",e),openFile:e=>O("file",e),showSidebar:e=>re("showSidebar",e),sidebarView:e=>j("sidebarView",e,se),startScript:e=>O("startScript",e),terminalHeight:e=>F("terminalHeight",e),theme:e=>j("theme",e,oe),view:e=>j("view",e,ie),zenMode:e=>h("zenMode",e)};function z(e={}){const t=Object.entries(e).map(([n,s])=>s!=null&&C.hasOwnProperty(n)?C[n](s):"").filter(Boolean);return t.length?`?${t.join("&")}`:""}function h(e,t){return t===!0?`${e}=1`:""}function re(e,t){return typeof t=="boolean"?`${e}=${t?"1":"0"}`:""}function F(e,t){if(typeof t=="number"&&!Number.isNaN(t)){const n=Math.min(100,Math.max(0,t));return`${e}=${encodeURIComponent(Math.round(n))}`}return""}function j(e,t="",n=[]){return n.includes(t)?`${e}=${encodeURIComponent(t)}`:""}function O(e,t){return(Array.isArray(t)?t:[t]).filter(s=>typeof s=="string"&&s.trim()!=="").map(s=>`${e}=${encodeURIComponent(s)}`).join("&")}function V(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function I(e,t){return`${k(t)}${e}${z(t)}`}function q(e,t){const n={forceEmbedLayout:!0};return t&&typeof t=="object"&&Object.assign(n,t),`${k(n)}${e}${z(n)}`}function k(e={}){return(typeof e.origin=="string"?e.origin:ne).replace(/\/$/,"")}function P(e,t,n){if(!t||!e||!e.parentNode)throw new Error("Invalid Element");e.id&&(t.id=e.id),e.className&&(t.className=e.className),ce(t,n),e.replaceWith(t)}function $(e){if(typeof e=="string"){const t=document.getElementById(e);if(!t)throw new Error(`Could not find element with id '${e}'`);return t}else if(e instanceof HTMLElement)return e;throw new Error(`Invalid element: ${e}`)}function D(e){return e&&e.newWindow===!1?"_self":"_blank"}function ce(e,t={}){const n=Object.hasOwnProperty.call(t,"height")?`${t.height}`:`${te}`,s=Object.hasOwnProperty.call(t,"width")?`${t.width}`:void 0;e.setAttribute("height",n),s?e.setAttribute("width",s):e.setAttribute("style","width:100%;")}class le{constructor(t){this.pending={},this.port=t,this.port.onmessage=this.messageListener.bind(this)}request({type:t,payload:n}){return new Promise((s,i)=>{const r=V();this.pending[r]={resolve:s,reject:i},this.port.postMessage({type:t,payload:{...n,__reqid:r}})})}messageListener(t){var a;if(typeof((a=t.data.payload)==null?void 0:a.__reqid)!="string")return;const{type:n,payload:s}=t.data,{__reqid:i,__success:r,__error:l}=s;this.pending[i]&&(r?this.pending[i].resolve(this.cleanResult(s)):this.pending[i].reject(l?`${n}: ${l}`:n),delete this.pending[i])}cleanResult(t){const n={...t};return delete n.__reqid,delete n.__success,delete n.__error,Object.keys(n).length?n:null}}class ae{constructor(t,n){this.editor={openFile:s=>this._rdc.request({type:"SDK_OPEN_FILE",payload:{path:s}}),setCurrentFile:s=>this._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:s}}),setTheme:s=>this._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:s}}),setView:s=>this._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:s}}),showSidebar:(s=!0)=>this._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:s}})},this.preview={origin:"",getUrl:()=>this._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then(s=>(s==null?void 0:s.url)??null),setUrl:(s="/")=>{if(typeof s!="string"||!s.startsWith("/"))throw new Error(`Invalid argument: expected a path starting with '/', got '${s}'`);return this._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:s}})}},this._rdc=new le(t),Object.defineProperty(this.preview,"origin",{value:typeof n.previewOrigin=="string"?n.previewOrigin:null,writable:!1})}applyFsDiff(t){const n=s=>s!==null&&typeof s=="object";if(!n(t)||!n(t.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(t.destroy))throw new Error("Invalid diff object: expected diff.destroy to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:t})}getDependencies(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}getFsSnapshot(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}}const b=[];class de{constructor(t){this.id=V(),this.element=t,this.pending=new Promise((n,s)=>{const i=({data:c,ports:o})=>{(c==null?void 0:c.action)==="SDK_INIT_SUCCESS"&&c.id===this.id&&(this.vm=new ae(o[0],c.payload),n(this.vm),l())},r=()=>{var c;(c=this.element.contentWindow)==null||c.postMessage({action:"SDK_INIT",id:this.id},"*")};function l(){window.clearInterval(d),window.removeEventListener("message",i)}window.addEventListener("message",i),r();let a=0;const d=window.setInterval(()=>{if(this.vm){l();return}if(a>=ee){l(),s("Timeout: Unable to establish a connection with the StackBlitz VM"),b.forEach((c,o)=>{c.id===this.id&&b.splice(o,1)});return}a++,r()},Q)}),b.push(this)}}const ue=e=>{const t=e instanceof Element?"element":"id";return b.find(n=>n[t]===e)??null};function pe(e,t){const n=document.createElement("input");return n.type="hidden",n.name=e,n.value=t,n}function he(e){return e.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}function K({template:e,title:t,description:n,dependencies:s,files:i,settings:r}){if(!A.includes(e)){const c=A.map(o=>`'${o}'`).join(", ");console.warn(`Unsupported project.template: must be one of ${c}`)}const l=[],a=(c,o,u="")=>{l.push(pe(c,typeof o=="string"?o:u))};a("project[title]",t),typeof n=="string"&&n.length>0&&a("project[description]",n),a("project[template]",e,"javascript"),s&&(e==="node"?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):a("project[dependencies]",JSON.stringify(s))),r&&a("project[settings]",JSON.stringify(r)),Object.entries(i).forEach(([c,o])=>{a(`project[files][${he(c)}]`,o)});const d=document.createElement("form");return d.method="POST",d.setAttribute("style","display:none!important;"),d.append(...l),d}function me(e,t){const n=K(e);return n.action=q("/run",t),n.id="sb_run",`<!doctype html>
<html>
<head><title></title></head>
<body>
  ${n.outerHTML}
  <script>document.getElementById('${n.id}').submit();<\/script>
</body>
</html>`}function fe(e,t){const n=K(e);n.action=I("/run",t),n.target=D(t),document.body.appendChild(n),n.submit(),document.body.removeChild(n)}function w(e){return e!=null&&e.contentWindow?(ue(e)??new de(e)).pending:Promise.reject("Provided element is not an iframe.")}function ge(e,t){fe(e,t)}function ve(e,t){const n=I(`/edit/${e}`,t),s=D(t);window.open(n,s)}function _e(e,t){const n=I(`/github/${e}`,t),s=D(t);window.open(n,s)}function ye(e,t,n){var l;const s=$(e),i=me(t,n),r=document.createElement("iframe");return P(s,r,n),(l=r.contentDocument)==null||l.write(i),w(r)}function be(e,t,n){const s=$(e),i=document.createElement("iframe");return i.src=q(`/edit/${t}`,n),P(s,i,n),w(i)}function we(e,t,n){const s=$(e),i=document.createElement("iframe");return i.src=q(`/github/${t}`,n),P(s,i,n),w(i)}const Ee={connect:w,embedGithubProject:we,embedProject:ye,embedProjectId:be,openGithubProject:_e,openProject:ge,openProjectId:ve};function Se(e){let t,n,s='<div class="i-logos"><div class="i-logo fade-svelte svelte-1os7cqo"><img src="/svelte-logo.svg" alt="svelte logo" class="svelte svelte-1os7cqo"/> <div class="i-letter fade-svelte svelte-1os7cqo">S</div></div> <div class="i-logo fade-hello not-first svelte-1os7cqo"><img src="/waving-logo.svg" alt="waving logo" class="svelte-1os7cqo"/> <div class="i-letter fade-hello not-first svelte-1os7cqo">H</div></div> <div class="i-logo fade-trpc not-first svelte-1os7cqo"><img src="/trpc-logo.svg" alt="trpc logo" class="svelte-1os7cqo"/> <div class="i-letter fade-trpc not-first svelte-1os7cqo">T</div></div> <div class="i-logo fade-zod not-first svelte-1os7cqo"><img src="/zod-logo.svg" alt="zod logo" class="zod svelte-1os7cqo"/> <div class="i-letter fade-zod not-first svelte-1os7cqo">Z</div></div></div>',i,r,l='<a href="/docs/v0/install" class="svelte-1os7cqo"><i class="icon text-icon svelte-1bevz0d svelte-1os7cqo"></i>Docs</a> <a href="https://github.com/sveltering/shtz" target="_blank" class="svelte-1os7cqo"><i class="icon github-icon svelte-1bevz0d svelte-1os7cqo"></i>Github</a> <a href="https://www.npmjs.com/package/@sveltering/shtz" target="_blank" class="svelte-1os7cqo"><i class="icon npm-icon svelte-1bevz0d svelte-1os7cqo"></i>npm</a>',a,d,c;return{c(){t=m("div"),n=m("div"),n.innerHTML=s,i=L(),r=m("div"),r.innerHTML=l,a=L(),d=m("div"),c=m("div"),this.h()},l(o){t=f(o,"DIV",{class:!0});var u=E(t);n=f(u,"DIV",{class:!0,"data-svelte-h":!0}),M(n)!=="svelte-1xzff5g"&&(n.innerHTML=s),i=N(u),r=f(u,"DIV",{class:!0,"data-svelte-h":!0}),M(r)!=="svelte-15anpl5"&&(r.innerHTML=l),u.forEach(p),a=N(o),d=f(o,"DIV",{class:!0});var v=E(d);c=f(v,"DIV",{class:!0}),E(c).forEach(p),v.forEach(p),this.h()},h(){g(n,"class","logo svelte-1os7cqo"),g(r,"class","links svelte-1os7cqo"),g(t,"class","wrapper svelte-1os7cqo"),g(c,"class","svelte-1os7cqo"),g(d,"class","frame svelte-1os7cqo")},m(o,u){S(o,t,u),_(t,n),e[3](n),_(t,i),_(t,r),e[4](t),S(o,a,u),S(o,d,u),_(d,c),e[5](c)},p:y,i:y,o:y,d(o){o&&(p(t),p(a),p(d)),e[3](null),e[4](null),e[5](null)}}}function Te(e,t,n){let s=[],i,r,l;W(function(){let o=i.querySelectorAll(".i-logo");s.push(setTimeout(function(){for(let u=0,v=o.length;u<v;u++)o[u].classList.add("animate")},500)),s.push(setTimeout(function(){r.classList.add("animation-done")},3e3)),Ee.embedProjectId(l,"github-ror6t4-rmfcer",{forceEmbedLayout:!0,openFile:"src/routes/+page.svelte"})}),x(function(){for(let o=0,u=s.length;o<u;o++)clearTimeout(s[o])});function a(o){T[o?"unshift":"push"](()=>{i=o,n(0,i)})}function d(o){T[o?"unshift":"push"](()=>{r=o,n(1,r)})}function c(o){T[o?"unshift":"push"](()=>{l=o,n(2,l)})}return[i,r,l,a,d,c]}class je extends H{constructor(t){super(),R(this,t,Te,Se,U,{})}}function Ie(e){let t,n;return t=new je({}),{c(){G(t.$$.fragment)},l(s){B(t.$$.fragment,s)},m(s,i){J(t,s,i),n=!0},p:y,i(s){n||(X(t.$$.fragment,s),n=!0)},o(s){Y(t.$$.fragment,s),n=!1},d(s){Z(t,s)}}}class $e extends H{constructor(t){super(),R(this,t,null,Ie,U,{})}}export{$e as component};
